<!DOCTYPE html>
<html>
<head>
  <title>Token Generator</title>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
</head>
<body>
  <h1>Firebase Token Generator</h1>
  <div>
    <input type="email" id="email" placeholder="Email">
    <input type="password" id="password" placeholder="Password">
    <button onclick="login()">Get Token</button>
  </div>
  <div id="token" style="margin-top: 20px; word-break: break-all;"></div>
  
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyDG_lr2X6s8caxk8jMLUa6C2YHbOywijj8", 
      authDomain: "misw-4301-native-cloud-433702.firebaseapp.com",
      projectId: "misw-4301-native-cloud-433702"
    };
    
    firebase.initializeApp(firebaseConfig);
    
    async function login() {
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;
      
      try {
        const userCredential = await firebase.auth().signInWithEmailAndPassword(email, password);
        
        // Accede al objeto user
        const user = userCredential.user;
        

        const tokenResult = await userCredential.user.getIdTokenResult();
        
        const role = tokenResult.claims.role; 
        const token = tokenResult.token;
        const displayName = user.displayName; 

        document.getElementById('token').textContent = "Token: " + token + "\nRol: " + role + "\nDisplay Name: " + (displayName || 'No disponible');




      } catch (error) {
        document.getElementById('token').textContent = 'Error: ' + error.message;
      }
    }
  </script>
</body>
</html>
